@using Assignment3_ShongChan.Services
@inject AuthHandler _auth

@{
    var user = _auth.GetUser();
    var profilePic = !string.IsNullOrEmpty(user?.ProfilePic) ? user.ProfilePic : "/Images/default-profile.png";
}

<ul class="navbar-nav ms-auto fs-4">
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="@profilePic"
                 alt="Profile Picture"
                 class="rounded-circle me-2"
                 style="width: 40px; height: 40px;" />
            <span>@user?.Username</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end fade" aria-labelledby="profileDropdown">
            <li><a class="dropdown-item" asp-controller="Profile" asp-action="Index">Profile</a></li>
            <li><a class="dropdown-item" asp-controller="Profile" asp-action="ChangePassword">Change Password</a></li>
            <li><a class="dropdown-item" asp-controller="Home" asp-action="Logout">Logout <i class="fa-solid fa-arrow-right-from-bracket"></i></a></li>
        </ul>
    </li>
</ul>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

